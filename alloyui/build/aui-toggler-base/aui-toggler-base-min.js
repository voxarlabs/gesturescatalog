YUI.add("aui-toggler-base",function(e,t){var n=e.Lang,r=n.isBoolean,i=n.isObject,s=n.isUndefined,o=n.toInt,u="cubic-bezier(0, 0.1, 0, 1.0)",a=e.getClassName,f=a("toggler","content"),l=a("toggler","content","collapsed"),c=a("toggler","content","expanded"),h=a("toggler","content","wrapper"),p=a("toggler","header"),d=a("toggler","header","collapsed"),v=a("toggler","header","expanded"),m={"false":l,"true":c},g={"false":d,"true":v},y='<div class="'+h+'"></div>',b=e.Component.create({NAME:"toggler",ATTRS:{animated:{validator:r,value:!1,writeOnce:!0},animating:{validator:r,value:!1},bindDOMEvents:{validator:r,value:!0,writeOnce:!0},content:{setter:e.one},expanded:{validator:r,value:!0},header:{setter:e.one},transition:{validator:i,value:{duration:.4,easing:u}}},EXTENDS:e.Base,headerEventHandler:function(e,t){if(e.type==="click"||e.isKey("enter")||e.isKey("space"))return e.preventDefault(),t.toggle();if(e.isKey("down")||e.isKey("right")||e.isKey("num_plus"))return e.preventDefault(),t.expand();if(e.isKey("up")||e.isKey("left")||e.isKey("esc")||e.isKey("num_minus"))return e.preventDefault(),t.collapse()},prototype:{initializer:function(){var e=this;e.bindUI(),e.syncUI(),e._uiSetExpanded(e.get("expanded"))},bindUI:function(){var t=this,n=t.get("header");n.setData("toggler",t);var r=[t.on("expandedChange",e.bind(t._onExpandedChange,t))];t.get("bindDOMEvents")&&r.push(n.on(["click","keydown"],e.rbind(b.headerEventHandler,null,t))),t._eventHandles=r},syncUI:function(){var e=this;e.get("content").addClass(f),e.get("header").addClass(p)},destructor:function(){var t=this;t.get("header").setData("toggler",null),(new e.EventHandle(t._eventHandles)).detach()},animate:function(t,n){var r=this;r._uiSetExpanded(!0);var i=e.merge(t,r.get("transition"));r.get("content").transition(i,e.bind(n,r))},collapse:function(e){var t=this;return t.toggle(!1,e)},expand:function(e){var t=this;return t.toggle(!0,e)},getContentHeight:function(){var e=this,t=e.get("content"),n=e.get("expanded"),r;n||e._uiSetExpanded(!0);if(t.hasMethod("getBoundingClientRect")){var i=t.invoke("getBoundingClientRect");i&&(r=i.bottom-i.top)}else r=t.get("offsetHeight");return n||e._uiSetExpanded(!1),r},toggle:function(e,t){var n=this,r=n.get("header"),i;if(!r.test(":visible"))return;i=n.get("expanded"),s(e)&&(e=!i);if(n.get("animated")&&e!==i){if(n.get("animating"))return e;var u=n.get("content"),a=n.getContentHeight(),f=n.contentGutter;s(f)&&(f=n.contentGutter=o(u.getStyle("marginTop"))),n.wrapped||(u.wrap(y),e&&u.setStyle("marginTop",-(a+f)),n.wrapped=!0),n.set("animating",!0),n.animate({marginTop:(e?f:-(a+f))+"px"},function(){n.set("animating",!1),n.set("expanded",e,t)})}else n.set("expanded",e,t);return e},_onExpandedChange:function(e){var t=this;t._uiSetExpanded(e.newVal)},_uiSetExpanded:function(e){var t=this;t.get("content").replaceClass(m[!e],m[e]),t.get("header").replaceClass(g[!e],g[e])}}});e.Toggler=b},"2.5.0",{requires:["transition","aui-selector","aui-event-base","aui-node","aui-component"],skinnable:!0});
