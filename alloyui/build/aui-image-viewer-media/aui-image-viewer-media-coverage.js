if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/aui-image-viewer-media/aui-image-viewer-media.js']) {
   __coverage__['build/aui-image-viewer-media/aui-image-viewer-media.js'] = {"path":"build/aui-image-viewer-media/aui-image-viewer-media.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":34},"end":{"line":1,"column":53}}},"2":{"name":"(anonymous_2)","line":127,"loc":{"start":{"line":127,"column":21},"end":{"line":127,"column":38}}},"3":{"name":"(anonymous_3)","line":143,"loc":{"start":{"line":143,"column":15},"end":{"line":143,"column":26}}},"4":{"name":"(anonymous_4)","line":165,"loc":{"start":{"line":165,"column":19},"end":{"line":165,"column":38}}},"5":{"name":"(anonymous_5)","line":232,"loc":{"start":{"line":232,"column":22},"end":{"line":232,"column":38}}},"6":{"name":"(anonymous_6)","line":261,"loc":{"start":{"line":261,"column":23},"end":{"line":261,"column":40}}},"7":{"name":"(anonymous_7)","line":270,"loc":{"start":{"line":270,"column":16},"end":{"line":270,"column":49}}},"8":{"name":"(anonymous_8)","line":285,"loc":{"start":{"line":285,"column":25},"end":{"line":285,"column":42}}},"9":{"name":"(anonymous_9)","line":306,"loc":{"start":{"line":306,"column":23},"end":{"line":306,"column":39}}},"10":{"name":"(anonymous_10)","line":330,"loc":{"start":{"line":330,"column":29},"end":{"line":330,"column":53}}},"11":{"name":"(anonymous_11)","line":353,"loc":{"start":{"line":353,"column":24},"end":{"line":353,"column":50}}},"12":{"name":"(anonymous_12)","line":359,"loc":{"start":{"line":359,"column":16},"end":{"line":359,"column":49}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":395,"column":96}},"2":{"start":{"line":9,"column":0},"end":{"line":20,"column":49}},"3":{"start":{"line":33,"column":0},"end":{"line":388,"column":3}},"4":{"start":{"line":128,"column":12},"end":{"line":128,"column":32}},"5":{"start":{"line":130,"column":12},"end":{"line":130,"column":44}},"6":{"start":{"line":132,"column":12},"end":{"line":132,"column":103}},"7":{"start":{"line":133,"column":12},"end":{"line":133,"column":79}},"8":{"start":{"line":134,"column":12},"end":{"line":134,"column":91}},"9":{"start":{"line":135,"column":12},"end":{"line":135,"column":100}},"10":{"start":{"line":144,"column":12},"end":{"line":144,"column":32}},"11":{"start":{"line":146,"column":12},"end":{"line":146,"column":44}},"12":{"start":{"line":148,"column":12},"end":{"line":148,"column":47}},"13":{"start":{"line":150,"column":12},"end":{"line":150,"column":72}},"14":{"start":{"line":152,"column":12},"end":{"line":156,"column":13}},"15":{"start":{"line":153,"column":16},"end":{"line":153,"column":56}},"16":{"start":{"line":155,"column":16},"end":{"line":155,"column":50}},"17":{"start":{"line":166,"column":12},"end":{"line":166,"column":32}},"18":{"start":{"line":168,"column":12},"end":{"line":168,"column":44}},"19":{"start":{"line":170,"column":12},"end":{"line":170,"column":61}},"20":{"start":{"line":172,"column":12},"end":{"line":172,"column":30}},"21":{"start":{"line":174,"column":12},"end":{"line":174,"column":52}},"22":{"start":{"line":176,"column":12},"end":{"line":221,"column":13}},"23":{"start":{"line":177,"column":16},"end":{"line":177,"column":69}},"24":{"start":{"line":179,"column":16},"end":{"line":179,"column":51}},"25":{"start":{"line":181,"column":16},"end":{"line":184,"column":18}},"26":{"start":{"line":186,"column":16},"end":{"line":186,"column":64}},"27":{"start":{"line":188,"column":16},"end":{"line":190,"column":17}},"28":{"start":{"line":189,"column":20},"end":{"line":189,"column":45}},"29":{"start":{"line":192,"column":16},"end":{"line":195,"column":18}},"30":{"start":{"line":197,"column":16},"end":{"line":197,"column":57}},"31":{"start":{"line":199,"column":16},"end":{"line":199,"column":42}},"32":{"start":{"line":201,"column":16},"end":{"line":201,"column":76}},"33":{"start":{"line":203,"column":16},"end":{"line":203,"column":43}},"34":{"start":{"line":205,"column":16},"end":{"line":205,"column":43}},"35":{"start":{"line":207,"column":16},"end":{"line":211,"column":18}},"36":{"start":{"line":213,"column":16},"end":{"line":218,"column":17}},"37":{"start":{"line":214,"column":20},"end":{"line":214,"column":64}},"38":{"start":{"line":216,"column":20},"end":{"line":216,"column":56}},"39":{"start":{"line":217,"column":20},"end":{"line":217,"column":56}},"40":{"start":{"line":220,"column":16},"end":{"line":220,"column":42}},"41":{"start":{"line":223,"column":12},"end":{"line":223,"column":26}},"42":{"start":{"line":233,"column":12},"end":{"line":233,"column":32}},"43":{"start":{"line":235,"column":12},"end":{"line":235,"column":44}},"44":{"start":{"line":237,"column":12},"end":{"line":237,"column":50}},"45":{"start":{"line":239,"column":12},"end":{"line":239,"column":42}},"46":{"start":{"line":241,"column":12},"end":{"line":249,"column":13}},"47":{"start":{"line":242,"column":16},"end":{"line":242,"column":56}},"48":{"start":{"line":244,"column":16},"end":{"line":244,"column":65}},"49":{"start":{"line":246,"column":16},"end":{"line":248,"column":17}},"50":{"start":{"line":247,"column":20},"end":{"line":247,"column":34}},"51":{"start":{"line":251,"column":12},"end":{"line":251,"column":26}},"52":{"start":{"line":262,"column":12},"end":{"line":262,"column":32}},"53":{"start":{"line":264,"column":12},"end":{"line":264,"column":54}},"54":{"start":{"line":266,"column":12},"end":{"line":266,"column":36}},"55":{"start":{"line":268,"column":12},"end":{"line":273,"column":14}},"56":{"start":{"line":271,"column":20},"end":{"line":271,"column":75}},"57":{"start":{"line":275,"column":12},"end":{"line":275,"column":29}},"58":{"start":{"line":286,"column":12},"end":{"line":286,"column":32}},"59":{"start":{"line":288,"column":12},"end":{"line":288,"column":57}},"60":{"start":{"line":290,"column":12},"end":{"line":296,"column":13}},"61":{"start":{"line":291,"column":16},"end":{"line":291,"column":52}},"62":{"start":{"line":293,"column":16},"end":{"line":295,"column":17}},"63":{"start":{"line":294,"column":20},"end":{"line":294,"column":47}},"64":{"start":{"line":307,"column":12},"end":{"line":307,"column":32}},"65":{"start":{"line":309,"column":12},"end":{"line":309,"column":44}},"66":{"start":{"line":311,"column":12},"end":{"line":311,"column":47}},"67":{"start":{"line":313,"column":12},"end":{"line":313,"column":43}},"68":{"start":{"line":315,"column":12},"end":{"line":315,"column":57}},"69":{"start":{"line":317,"column":12},"end":{"line":319,"column":13}},"70":{"start":{"line":318,"column":16},"end":{"line":318,"column":45}},"71":{"start":{"line":331,"column":12},"end":{"line":331,"column":32}},"72":{"start":{"line":333,"column":12},"end":{"line":335,"column":45}},"73":{"start":{"line":337,"column":12},"end":{"line":337,"column":48}},"74":{"start":{"line":339,"column":12},"end":{"line":342,"column":15}},"75":{"start":{"line":354,"column":12},"end":{"line":354,"column":58}},"76":{"start":{"line":355,"column":12},"end":{"line":355,"column":47}},"77":{"start":{"line":357,"column":12},"end":{"line":374,"column":14}},"78":{"start":{"line":360,"column":20},"end":{"line":366,"column":22}},"79":{"start":{"line":368,"column":20},"end":{"line":368,"column":91}},"80":{"start":{"line":370,"column":20},"end":{"line":372,"column":21}},"81":{"start":{"line":371,"column":24},"end":{"line":371,"column":49}},"82":{"start":{"line":376,"column":12},"end":{"line":376,"column":27}},"83":{"start":{"line":390,"column":0},"end":{"line":390,"column":40}},"84":{"start":{"line":392,"column":0},"end":{"line":392,"column":30}}},"branchMap":{"1":{"line":152,"type":"if","locations":[{"start":{"line":152,"column":12},"end":{"line":152,"column":12}},{"start":{"line":152,"column":12},"end":{"line":152,"column":12}}]},"2":{"line":176,"type":"if","locations":[{"start":{"line":176,"column":12},"end":{"line":176,"column":12}},{"start":{"line":176,"column":12},"end":{"line":176,"column":12}}]},"3":{"line":188,"type":"if","locations":[{"start":{"line":188,"column":16},"end":{"line":188,"column":16}},{"start":{"line":188,"column":16},"end":{"line":188,"column":16}}]},"4":{"line":213,"type":"if","locations":[{"start":{"line":213,"column":16},"end":{"line":213,"column":16}},{"start":{"line":213,"column":16},"end":{"line":213,"column":16}}]},"5":{"line":241,"type":"if","locations":[{"start":{"line":241,"column":12},"end":{"line":241,"column":12}},{"start":{"line":241,"column":12},"end":{"line":241,"column":12}}]},"6":{"line":246,"type":"if","locations":[{"start":{"line":246,"column":16},"end":{"line":246,"column":16}},{"start":{"line":246,"column":16},"end":{"line":246,"column":16}}]},"7":{"line":271,"type":"binary-expr","locations":[{"start":{"line":271,"column":27},"end":{"line":271,"column":53}},{"start":{"line":271,"column":58},"end":{"line":271,"column":73}}]},"8":{"line":290,"type":"if","locations":[{"start":{"line":290,"column":12},"end":{"line":290,"column":12}},{"start":{"line":290,"column":12},"end":{"line":290,"column":12}}]},"9":{"line":293,"type":"if","locations":[{"start":{"line":293,"column":16},"end":{"line":293,"column":16}},{"start":{"line":293,"column":16},"end":{"line":293,"column":16}}]},"10":{"line":317,"type":"if","locations":[{"start":{"line":317,"column":12},"end":{"line":317,"column":12}},{"start":{"line":317,"column":12},"end":{"line":317,"column":12}}]},"11":{"line":317,"type":"binary-expr","locations":[{"start":{"line":317,"column":16},"end":{"line":317,"column":36}},{"start":{"line":317,"column":40},"end":{"line":317,"column":74}}]},"12":{"line":368,"type":"binary-expr","locations":[{"start":{"line":368,"column":33},"end":{"line":368,"column":61}},{"start":{"line":368,"column":65},"end":{"line":368,"column":90}}]},"13":{"line":370,"type":"if","locations":[{"start":{"line":370,"column":20},"end":{"line":370,"column":20}},{"start":{"line":370,"column":20},"end":{"line":370,"column":20}}]}},"code":["(function () { YUI.add('aui-image-viewer-media', function (A, NAME) {","","/**"," * The ImageViewer Media Plugin"," *"," * @module aui-media-viewer-plugin"," */","","var Lang = A.Lang,","    Do = A.Do,","","    DEFAULT_OPTIONS = {","        height: 360,","        width: 640,","        wmode: 'embed'","    },","","    REGEX_DOMAIN = 'https?://(?:www\\\\.)?{domain}',","","    REGEX_PARAM = '(?:[\\\\?&]|^){param}=([^&#]*)';","","/**"," * A base class for `A.MediaViewerPlugin`."," *"," * Check the [live demo](http://alloyui.com/examples/image-viewer/)."," *"," * @class A.MediaViewerPlugin"," * @extends Plugin.Base"," * @param {Object} config Object literal specifying widget configuration"," *     properties."," * @constructor"," */","var MediaViewerPlugin = A.Component.create({","    /**","     * Static property provides a string to identify the class.","     *","     * @property NAME","     * @type String","     * @static","     */","    NAME: 'mediaViewerPlugin',","","    /**","     * Static property provides a string to identify the namespace.","     *","     * @property NS","     * @type String","     * @static","     */","    NS: 'media',","","    /**","     * Static property used to define the default attribute","     * configuration for the `A.MediaViewerPlugin`.","     *","     * @property ATTRS","     * @type Object","     * @static","     */","    ATTRS: {","","        /**","         * Contains the templates, options and definitions for each provider","         * (Flash, Youtube, Vimeo).","         *","         * @attribute providers","         * @type Object","         */","        providers: {","            validator: Lang.isObject,","            value: {","                'flash': {","                    container: '<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" width=\"{width}\" height=\"{height}\"><param name=\"wmode\" value=\"{wmode}\" /><param name=\"allowfullscreen\" value=\"true\" /><param name=\"allowscriptaccess\" value=\"always\" /><param name=\"movie\" value=\"{media}\" /><embed src=\"{media}\" type=\"application/x-shockwave-flash\" allowfullscreen=\"true\" allowscriptaccess=\"always\" width=\"{width}\" height=\"{height}\" wmode=\"{wmode}\"></embed></object>',","                    matcher: /\\b.swf\\b/i,","                    options: DEFAULT_OPTIONS,","                    mediaRegex: /([^?&#]+)/","                },","                'youtube': {","                    container: '<iframe width=\"{width}\" height=\"{height}\" src=\"http://www.youtube.com/embed/{media}\" frameborder=\"0\" allowfullscreen></iframe>',","                    matcher: new RegExp(","                        Lang.sub(","                            REGEX_DOMAIN, {","                                domain: 'youtube.com'","                            }","                        ),","                        'i'","                    ),","                    options: DEFAULT_OPTIONS,","                    mediaRegex: /[\\?&]v=([^&#]*)/i","                },","                'vimeo': {","                    container: '<iframe src=\"http://player.vimeo.com/video/{media}?title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff\" width=\"{width}\" height=\"{height}\" frameborder=\"0\"></iframe>',","                    matcher: new RegExp(","                        Lang.sub(","                            REGEX_DOMAIN, {","                                domain: 'vimeo.com'","                            }","                        ),","                        'i'","                    ),","                    options: DEFAULT_OPTIONS,","                    mediaRegex: /\\/(\\d+)/","                }","            }","        }","    },","","    /**","     * Static property used to define which component it extends.","     *","     * @property EXTENDS","     * @type Object","     * @static","     */","    EXTENDS: A.Plugin.Base,","","    prototype: {","","        /**","         * Construction logic executed during `A.MediaViewerPlugin` instantiation.","         * Lifecycle.","         *","         * @method initializer","         * @param config","         * @protected","         */","        initializer: function(config) {","            var instance = this;","","            var handles = instance._handles;","","            handles.changeReqeust = instance.afterHostMethod('_changeRequest', instance._restoreMedia);","            handles.close = instance.beforeHostMethod('close', instance.close);","            handles.loadMedia = instance.beforeHostMethod('loadImage', instance.loadMedia);","            handles.preloadImage = instance.beforeHostMethod('preloadImage', instance.preloadImage);","        },","","        /**","         * Checks if the media type is an image, if not empty the content.","         *","         * @method close","         */","        close: function() {","            var instance = this;","","            var host = instance.get('host');","","            var source = host.getCurrentLink();","","            var mediaType = instance._getMediaType(source.attr('href'));","","            if (mediaType != 'image') {","                instance._redirectIframe('about:blank');","","                host.setStdModContent('body', '');","            }","        },","","        /**","         * Loads a media based on the `providers` and include it on a container.","         *","         * @method loadMedia","         * @param linkHref","         */","        loadMedia: function(linkHref) {","            var instance = this;","","            var host = instance.get('host');","","            var mediaType = instance._getMediaType(linkHref);","","            var result = true;","","            instance._redirectIframe('about:blank');","","            if (mediaType != 'image') {","                var providers = instance.get('providers')[mediaType];","","                var source = host.getCurrentLink();","","                var options = instance._updateOptions(","                    source,","                    A.clone(providers.options)","                );","","                var media = providers.mediaRegex.exec(linkHref);","","                if (media) {","                    options.media = media[1];","                }","","                var container = Lang.sub(","                    providers.container,","                    options","                );","","                host.setStdModContent('body', container);","","                host._syncImageViewerUI();","","                instance._uiSetContainerSize(options.width, options.height);","","                host._setAlignCenter(true);","","                host.set('loading', false);","","                host.fire(","                    'load', {","                        media: media","                    }","                );","","                if (host.get('preloadNeighborImages')) {","                    var currentIndex = host.get('currentIndex');","","                    host.preloadImage(currentIndex + 1);","                    host.preloadImage(currentIndex - 1);","                }","","                result = new Do.Prevent();","            }","","            return result;","        },","","        /**","         * Preloads an image.","         *","         * @method preloadImage","         * @param index","         */","        preloadImage: function(index) {","            var instance = this;","","            var host = instance.get('host');","","            var currentLink = host.getLink(index);","","            var result = new Do.Prevent();","","            if (currentLink) {","                var linkHref = currentLink.attr('href');","","                var mediaType = instance._getMediaType(linkHref);","","                if (mediaType == 'image') {","                    result = true;","                }","            }","","            return result;","        },","","        /**","         * Gets the media type from the `providers`.","         *","         * @method _getMediaType","         * @param source","         * @protected","         */","        _getMediaType: function(source) {","            var instance = this;","","            var providers = instance.get('providers');","","            var mediaType = 'image';","","            A.some(","                providers,","                function(value, key, collection) {","                    return value.matcher.test(source) && (mediaType = key);","                }","            );","","            return mediaType;","        },","","        /**","         * Sets the `src` attribute in the iframe.","         *","         * @method _redirectIframe","         * @param source","         * @protected","         */","        _redirectIframe: function(source) {","            var instance = this;","","            var bodyNode = instance.get('host.bodyNode');","","            if (bodyNode) {","                var iframe = bodyNode.one('iframe');","","                if (iframe) {","                    iframe.attr('src', source);","                }","            }","        },","","        /**","         * Restores a media.","         *","         * @method _restoreMedia","         * @param event","         * @protected","         */","        _restoreMedia: function(event) {","            var instance = this;","","            var host = instance.get('host');","","            var source = host.getCurrentLink();","","            var href = source.attr('href');","","            var mediaType = instance._getMediaType(href);","","            if (mediaType != 'image' && !host.getStdModNode('body').html()) {","                host._processChangeRequest();","            }","        },","","        /**","         * Sets the container width and height in the UI.","         *","         * @method _uiSetContainerSize","         * @param width","         * @param height","         * @protected","         */","        _uiSetContainerSize: function(width, height) {","            var instance = this;","","            var host = instance.get('host'),","                bodyNode = host.bodyNode,","                footerNode = host.footerNode;","","            footerNode.setStyle('width', width);","","            bodyNode.setStyles({","                height: height,","                width: width","            });","        },","","        /**","         * Goes through the options and update its value.","         *","         * @method _updateOptions","         * @param source","         * @param options","         * @protected","         */","        _updateOptions: function(source, options) {","            var dataOptions = source.attr('data-options');","            var linkHref = source.attr('href');","","            A.each(","                options,","                function(value, key, collection) {","                    var regexParam = new RegExp(","                        Lang.sub(","                            REGEX_PARAM, {","                                param: key","                            }","                        )","                    );","","                    var result = regexParam.exec(dataOptions) || regexParam.exec(linkHref);","","                    if (result) {","                        options[key] = result[1];","                    }","                }","            );","","            return options;","        },","","        _handles: {}","    },","","    DATA_OPTIONS: 'data-options',","","    DEFAULT_OPTIONS: DEFAULT_OPTIONS,","","    REGEX_DOMAIN: REGEX_DOMAIN,","    REGEX_PARAM: REGEX_PARAM","});","","A.MediaViewerPlugin = MediaViewerPlugin;","","A.MediaViewer = A.ImageViewer;","","","}, '2.5.0', {\"requires\": [\"plugin\", \"aui-image-viewer-base\", \"aui-pagination\", \"aui-toolbar\"]});","","}());"]};
}
var __cov_khMfAJ1c9kyxwI63Wpgdkg = __coverage__['build/aui-image-viewer-media/aui-image-viewer-media.js'];
__cov_khMfAJ1c9kyxwI63Wpgdkg.s['1']++;YUI.add('aui-image-viewer-media',function(A,NAME){__cov_khMfAJ1c9kyxwI63Wpgdkg.f['1']++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['2']++;var Lang=A.Lang,Do=A.Do,DEFAULT_OPTIONS={height:360,width:640,wmode:'embed'},REGEX_DOMAIN='https?://(?:www\\.)?{domain}',REGEX_PARAM='(?:[\\?&]|^){param}=([^&#]*)';__cov_khMfAJ1c9kyxwI63Wpgdkg.s['3']++;var MediaViewerPlugin=A.Component.create({NAME:'mediaViewerPlugin',NS:'media',ATTRS:{providers:{validator:Lang.isObject,value:{'flash':{container:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{media}" /><embed src="{media}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',matcher:/\b.swf\b/i,options:DEFAULT_OPTIONS,mediaRegex:/([^?&#]+)/},'youtube':{container:'<iframe width="{width}" height="{height}" src="http://www.youtube.com/embed/{media}" frameborder="0" allowfullscreen></iframe>',matcher:new RegExp(Lang.sub(REGEX_DOMAIN,{domain:'youtube.com'}),'i'),options:DEFAULT_OPTIONS,mediaRegex:/[\?&]v=([^&#]*)/i},'vimeo':{container:'<iframe src="http://player.vimeo.com/video/{media}?title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff" width="{width}" height="{height}" frameborder="0"></iframe>',matcher:new RegExp(Lang.sub(REGEX_DOMAIN,{domain:'vimeo.com'}),'i'),options:DEFAULT_OPTIONS,mediaRegex:/\/(\d+)/}}}},EXTENDS:A.Plugin.Base,prototype:{initializer:function(config){__cov_khMfAJ1c9kyxwI63Wpgdkg.f['2']++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['4']++;var instance=this;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['5']++;var handles=instance._handles;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['6']++;handles.changeReqeust=instance.afterHostMethod('_changeRequest',instance._restoreMedia);__cov_khMfAJ1c9kyxwI63Wpgdkg.s['7']++;handles.close=instance.beforeHostMethod('close',instance.close);__cov_khMfAJ1c9kyxwI63Wpgdkg.s['8']++;handles.loadMedia=instance.beforeHostMethod('loadImage',instance.loadMedia);__cov_khMfAJ1c9kyxwI63Wpgdkg.s['9']++;handles.preloadImage=instance.beforeHostMethod('preloadImage',instance.preloadImage);},close:function(){__cov_khMfAJ1c9kyxwI63Wpgdkg.f['3']++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['10']++;var instance=this;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['11']++;var host=instance.get('host');__cov_khMfAJ1c9kyxwI63Wpgdkg.s['12']++;var source=host.getCurrentLink();__cov_khMfAJ1c9kyxwI63Wpgdkg.s['13']++;var mediaType=instance._getMediaType(source.attr('href'));__cov_khMfAJ1c9kyxwI63Wpgdkg.s['14']++;if(mediaType!='image'){__cov_khMfAJ1c9kyxwI63Wpgdkg.b['1'][0]++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['15']++;instance._redirectIframe('about:blank');__cov_khMfAJ1c9kyxwI63Wpgdkg.s['16']++;host.setStdModContent('body','');}else{__cov_khMfAJ1c9kyxwI63Wpgdkg.b['1'][1]++;}},loadMedia:function(linkHref){__cov_khMfAJ1c9kyxwI63Wpgdkg.f['4']++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['17']++;var instance=this;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['18']++;var host=instance.get('host');__cov_khMfAJ1c9kyxwI63Wpgdkg.s['19']++;var mediaType=instance._getMediaType(linkHref);__cov_khMfAJ1c9kyxwI63Wpgdkg.s['20']++;var result=true;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['21']++;instance._redirectIframe('about:blank');__cov_khMfAJ1c9kyxwI63Wpgdkg.s['22']++;if(mediaType!='image'){__cov_khMfAJ1c9kyxwI63Wpgdkg.b['2'][0]++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['23']++;var providers=instance.get('providers')[mediaType];__cov_khMfAJ1c9kyxwI63Wpgdkg.s['24']++;var source=host.getCurrentLink();__cov_khMfAJ1c9kyxwI63Wpgdkg.s['25']++;var options=instance._updateOptions(source,A.clone(providers.options));__cov_khMfAJ1c9kyxwI63Wpgdkg.s['26']++;var media=providers.mediaRegex.exec(linkHref);__cov_khMfAJ1c9kyxwI63Wpgdkg.s['27']++;if(media){__cov_khMfAJ1c9kyxwI63Wpgdkg.b['3'][0]++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['28']++;options.media=media[1];}else{__cov_khMfAJ1c9kyxwI63Wpgdkg.b['3'][1]++;}__cov_khMfAJ1c9kyxwI63Wpgdkg.s['29']++;var container=Lang.sub(providers.container,options);__cov_khMfAJ1c9kyxwI63Wpgdkg.s['30']++;host.setStdModContent('body',container);__cov_khMfAJ1c9kyxwI63Wpgdkg.s['31']++;host._syncImageViewerUI();__cov_khMfAJ1c9kyxwI63Wpgdkg.s['32']++;instance._uiSetContainerSize(options.width,options.height);__cov_khMfAJ1c9kyxwI63Wpgdkg.s['33']++;host._setAlignCenter(true);__cov_khMfAJ1c9kyxwI63Wpgdkg.s['34']++;host.set('loading',false);__cov_khMfAJ1c9kyxwI63Wpgdkg.s['35']++;host.fire('load',{media:media});__cov_khMfAJ1c9kyxwI63Wpgdkg.s['36']++;if(host.get('preloadNeighborImages')){__cov_khMfAJ1c9kyxwI63Wpgdkg.b['4'][0]++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['37']++;var currentIndex=host.get('currentIndex');__cov_khMfAJ1c9kyxwI63Wpgdkg.s['38']++;host.preloadImage(currentIndex+1);__cov_khMfAJ1c9kyxwI63Wpgdkg.s['39']++;host.preloadImage(currentIndex-1);}else{__cov_khMfAJ1c9kyxwI63Wpgdkg.b['4'][1]++;}__cov_khMfAJ1c9kyxwI63Wpgdkg.s['40']++;result=new Do.Prevent();}else{__cov_khMfAJ1c9kyxwI63Wpgdkg.b['2'][1]++;}__cov_khMfAJ1c9kyxwI63Wpgdkg.s['41']++;return result;},preloadImage:function(index){__cov_khMfAJ1c9kyxwI63Wpgdkg.f['5']++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['42']++;var instance=this;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['43']++;var host=instance.get('host');__cov_khMfAJ1c9kyxwI63Wpgdkg.s['44']++;var currentLink=host.getLink(index);__cov_khMfAJ1c9kyxwI63Wpgdkg.s['45']++;var result=new Do.Prevent();__cov_khMfAJ1c9kyxwI63Wpgdkg.s['46']++;if(currentLink){__cov_khMfAJ1c9kyxwI63Wpgdkg.b['5'][0]++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['47']++;var linkHref=currentLink.attr('href');__cov_khMfAJ1c9kyxwI63Wpgdkg.s['48']++;var mediaType=instance._getMediaType(linkHref);__cov_khMfAJ1c9kyxwI63Wpgdkg.s['49']++;if(mediaType=='image'){__cov_khMfAJ1c9kyxwI63Wpgdkg.b['6'][0]++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['50']++;result=true;}else{__cov_khMfAJ1c9kyxwI63Wpgdkg.b['6'][1]++;}}else{__cov_khMfAJ1c9kyxwI63Wpgdkg.b['5'][1]++;}__cov_khMfAJ1c9kyxwI63Wpgdkg.s['51']++;return result;},_getMediaType:function(source){__cov_khMfAJ1c9kyxwI63Wpgdkg.f['6']++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['52']++;var instance=this;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['53']++;var providers=instance.get('providers');__cov_khMfAJ1c9kyxwI63Wpgdkg.s['54']++;var mediaType='image';__cov_khMfAJ1c9kyxwI63Wpgdkg.s['55']++;A.some(providers,function(value,key,collection){__cov_khMfAJ1c9kyxwI63Wpgdkg.f['7']++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['56']++;return(__cov_khMfAJ1c9kyxwI63Wpgdkg.b['7'][0]++,value.matcher.test(source))&&(__cov_khMfAJ1c9kyxwI63Wpgdkg.b['7'][1]++,mediaType=key);});__cov_khMfAJ1c9kyxwI63Wpgdkg.s['57']++;return mediaType;},_redirectIframe:function(source){__cov_khMfAJ1c9kyxwI63Wpgdkg.f['8']++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['58']++;var instance=this;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['59']++;var bodyNode=instance.get('host.bodyNode');__cov_khMfAJ1c9kyxwI63Wpgdkg.s['60']++;if(bodyNode){__cov_khMfAJ1c9kyxwI63Wpgdkg.b['8'][0]++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['61']++;var iframe=bodyNode.one('iframe');__cov_khMfAJ1c9kyxwI63Wpgdkg.s['62']++;if(iframe){__cov_khMfAJ1c9kyxwI63Wpgdkg.b['9'][0]++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['63']++;iframe.attr('src',source);}else{__cov_khMfAJ1c9kyxwI63Wpgdkg.b['9'][1]++;}}else{__cov_khMfAJ1c9kyxwI63Wpgdkg.b['8'][1]++;}},_restoreMedia:function(event){__cov_khMfAJ1c9kyxwI63Wpgdkg.f['9']++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['64']++;var instance=this;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['65']++;var host=instance.get('host');__cov_khMfAJ1c9kyxwI63Wpgdkg.s['66']++;var source=host.getCurrentLink();__cov_khMfAJ1c9kyxwI63Wpgdkg.s['67']++;var href=source.attr('href');__cov_khMfAJ1c9kyxwI63Wpgdkg.s['68']++;var mediaType=instance._getMediaType(href);__cov_khMfAJ1c9kyxwI63Wpgdkg.s['69']++;if((__cov_khMfAJ1c9kyxwI63Wpgdkg.b['11'][0]++,mediaType!='image')&&(__cov_khMfAJ1c9kyxwI63Wpgdkg.b['11'][1]++,!host.getStdModNode('body').html())){__cov_khMfAJ1c9kyxwI63Wpgdkg.b['10'][0]++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['70']++;host._processChangeRequest();}else{__cov_khMfAJ1c9kyxwI63Wpgdkg.b['10'][1]++;}},_uiSetContainerSize:function(width,height){__cov_khMfAJ1c9kyxwI63Wpgdkg.f['10']++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['71']++;var instance=this;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['72']++;var host=instance.get('host'),bodyNode=host.bodyNode,footerNode=host.footerNode;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['73']++;footerNode.setStyle('width',width);__cov_khMfAJ1c9kyxwI63Wpgdkg.s['74']++;bodyNode.setStyles({height:height,width:width});},_updateOptions:function(source,options){__cov_khMfAJ1c9kyxwI63Wpgdkg.f['11']++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['75']++;var dataOptions=source.attr('data-options');__cov_khMfAJ1c9kyxwI63Wpgdkg.s['76']++;var linkHref=source.attr('href');__cov_khMfAJ1c9kyxwI63Wpgdkg.s['77']++;A.each(options,function(value,key,collection){__cov_khMfAJ1c9kyxwI63Wpgdkg.f['12']++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['78']++;var regexParam=new RegExp(Lang.sub(REGEX_PARAM,{param:key}));__cov_khMfAJ1c9kyxwI63Wpgdkg.s['79']++;var result=(__cov_khMfAJ1c9kyxwI63Wpgdkg.b['12'][0]++,regexParam.exec(dataOptions))||(__cov_khMfAJ1c9kyxwI63Wpgdkg.b['12'][1]++,regexParam.exec(linkHref));__cov_khMfAJ1c9kyxwI63Wpgdkg.s['80']++;if(result){__cov_khMfAJ1c9kyxwI63Wpgdkg.b['13'][0]++;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['81']++;options[key]=result[1];}else{__cov_khMfAJ1c9kyxwI63Wpgdkg.b['13'][1]++;}});__cov_khMfAJ1c9kyxwI63Wpgdkg.s['82']++;return options;},_handles:{}},DATA_OPTIONS:'data-options',DEFAULT_OPTIONS:DEFAULT_OPTIONS,REGEX_DOMAIN:REGEX_DOMAIN,REGEX_PARAM:REGEX_PARAM});__cov_khMfAJ1c9kyxwI63Wpgdkg.s['83']++;A.MediaViewerPlugin=MediaViewerPlugin;__cov_khMfAJ1c9kyxwI63Wpgdkg.s['84']++;A.MediaViewer=A.ImageViewer;},'2.5.0',{'requires':['plugin','aui-image-viewer-base','aui-pagination','aui-toolbar']});
