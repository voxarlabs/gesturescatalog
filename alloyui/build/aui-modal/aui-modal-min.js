YUI.add("aui-modal",function(e,t){var n=e.Lang,r=e.UA,i=e.WidgetStdMod,s=e.getClassName,o=s("modal-body"),u=s("modal-footer"),a=s("modal-header");e.Modal=e.Base.create("modal",e.Widget,[e.WidgetCssClass,e.WidgetPosition,e.WidgetStdMod,e.WidgetToggle,e.WidgetAutohide,e.WidgetToolbars,e.WidgetModality,e.WidgetPositionAlign,e.WidgetPositionConstrain,e.WidgetStack],{initializer:function(){var t=this,n;n=[e.after(t._afterFillHeight,t,"fillHeight"),t.after("resize:end",e.bind(t._syncResizeDimensions,t)),t.after("draggableChange",t._afterDraggableChange),t.after("resizableChange",t._afterResizableChange),t.after("visibleChange",t._afterVisibleChange)],t._applyPlugin(t._onUserInitInteraction),t._eventHandles=n},destructor:function(){var t=this;(new e.EventHandle(t._eventHandles)).detach(),t._userInteractionHandle&&t._userInteractionHandle.detach()},_addBubbleTargets:function(t){var r=this;return n.isObject(t)||(t={}),e.mix(t,{bubbleTargets:r})},_afterFillHeight:function(){var e=this;e._fillMaxHeight(e.get("height"))},_afterDraggableChange:function(t){var n=this;t.newVal?n._applyPlugin(n._plugDrag):n.unplug(e.Plugin.Drag)},_afterResizableChange:function(t){var n=this;t.newVal?n._applyPlugin(n._plugResize):n.unplug(e.Plugin.Resize)},_afterVisibleChange:function(t){var n=this;!t.newVal&&n.get("destroyOnHide")&&e.soon(e.bind("destroy",n))},_applyPlugin:function(e){var t=this;r.touchEnabled?e.call(t):t._userInteractionHandle||(t._userInteractionHandle=t.once(["click","mousemove"],t._onUserInitInteraction,t))},_fillMaxHeight:function(e){var t=this,n=t.get("fillHeight"),r=t.getStdModNode(n,!0);r&&r.setStyle("maxHeight",e)},_getStdModTemplate:function(t){return e.Node.create(e.Modal.TEMPLATES[t],this._stdModNode.get("ownerDocument"))},_beforeResizeCorrectDimensions:function(){var t=this;if(t.resize.proxy)return new e.Do.Prevent},_onUserInitInteraction:function(){var e=this,t=e.get("draggable"),n=e.get("resizable");e._userInteractionHandle=null,t&&e._plugDrag(),n&&e._plugResize()},_plugDrag:function(){var t=this,n=t.get("draggable");t.plug(e.Plugin.Drag,t._addBubbleTargets(n))},_plugResize:function(){var t=this,n=t.get("resizable");t.plug(e.Plugin.Resize,t._addBubbleTargets(n)),e.before(t._beforeResizeCorrectDimensions,t.resize,"_correctDimensions",t)},_syncResizeDimensions:function(e){var t=this,n=e.info;t.set("width",n.offsetWidth),t.set("height",n.offsetHeight)}},{CSS_PREFIX:s("modal"),ATTRS:{bodyContent:{value:""},destroyOnHide:{validator:n.isBoolean,value:!1},draggable:{value:{handles:["."+a],plugins:[{fn:e.Plugin.DDConstrained}]}},resizable:{value:{handles:"br"}},toolbars:{valueFn:function(){var e=this;return{header:[{cssClass:"close",label:"\u00d7",on:{click:function(t){e.hide(),t.domEvent.stopPropagation()}},render:!0}]}}}},TEMPLATES:{header:'<div class="'+i.SECTION_CLASS_NAMES[i.HEADER]+" "+a+'"></div>',body:'<div class="'+i.SECTION_CLASS_NAMES[i.BODY]+" "+o+'"></div>',footer:'<div class="'+i.SECTION_CLASS_NAMES[i.FOOTER]+" "+u+'"></div>'}})},"2.5.0",{requires:["widget","widget-autohide","widget-buttons","widget-modality","widget-position","widget-position-align","widget-position-constrain","widget-stack","widget-stdmod","dd-plugin","dd-constrain","resize-plugin","timers","aui-classnamemanager","aui-widget-cssclass","aui-widget-toggle","aui-widget-toolbars"]});
